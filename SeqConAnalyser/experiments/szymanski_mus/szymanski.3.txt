int flag0 = 0;
int flag1 = 0;
int flag2 = 0;
int flag3 = 0;

proctype P0 {
do
:: true ->
	store(flag0,1);

	if
	:: (load(flag1,0) || load(flag1,1) || load(flag1,2)) && (load(flag2,0) || load(flag2,1) || load(flag2,2)) && (load(flag3,0) || load(flag3,1) || load(flag3,2)) -> skip;
	fi;
	
	store(flag0,3);

	if
	:: load(flag1,1) || load(flag2,1) || load(flag3,1) -> store(flag0,2);
		if
		:: load(flag1,4) || load(flag2,4) || load(flag3,4) -> skip;
		fi;
	:: (load(flag1,0) || load(flag1,2) || load(flag1,3) || load(flag1,4)) && (load(flag2,0) || load(flag2,2) || load(flag2,3) || load(flag2,4)) && (load(flag3,0) || load(flag3,2) || load(flag3,3) || load(flag3,4)) -> skip;
	fi;
	
	store(flag0,4);
	
	if
	:: load(flag1,0) -> skip;
	:: load(flag1,1) -> skip;
	:: load(flag2,0) -> skip;
	:: load(flag2,1) -> skip;
	:: load(flag3,0) -> skip;
	:: load(flag3,1) -> skip;
	fi;

	if
	:: (load(flag1,0) || load(flag1,1) || load(flag1,4)) && (load(flag2,0) || load(flag2,1) || load(flag2,4)) && (load(flag3,0) || load(flag3,1) || load(flag3,4)) -> skip;
	fi;
	
	store(flag0,0);
od;
}

proctype P1 {
do
:: true ->
	store(flag1,1);

	if
	:: (load(flag0,0) || load(flag0,1) || load(flag0,2)) && (load(flag2,0) || load(flag2,1) || load(flag2,2)) && (load(flag3,0) || load(flag3,1) || load(flag3,2)) -> skip;
	fi;
	
	store(flag1,3);

	if
	:: load(flag0,1) || load(flag2,1) || load(flag3,1) -> store(flag0,2);
		if
		:: load(flag0,4) || load(flag2,4) || load(flag3,4) -> skip;
		fi;
	:: (load(flag0,0) || load(flag0,2) || load(flag0,3) || load(flag0,4)) && (load(flag2,0) || load(flag2,2) || load(flag2,3) || load(flag2,4)) && (load(flag3,0) || load(flag3,2) || load(flag3,3) || load(flag3,4)) -> skip;
	fi;
	
	store(flag1,4);
	
	if
	:: load(flag0,0) -> skip;
	:: load(flag0,1) -> skip;
	:: load(flag2,0) -> skip;
	:: load(flag2,1) -> skip;
	:: load(flag3,0) -> skip;
	:: load(flag3,1) -> skip;
	fi;

	if
	:: (load(flag0,0) || load(flag0,1) || load(flag0,4)) && (load(flag2,0) || load(flag2,1) || load(flag2,4)) && (load(flag3,0) || load(flag3,1) || load(flag3,4)) -> skip;
	fi;
	
	store(flag1,0);
od;
}

proctype P2 {
do
:: true ->
	store(flag2,1);

	if
	:: (load(flag0,0) || load(flag0,1) || load(flag0,2)) && (load(flag1,0) || load(flag1,1) || load(flag1,2)) && (load(flag3,0) || load(flag3,1) || load(flag3,2)) -> skip;
	fi;
	
	store(flag2,3);

	if
	:: load(flag0,1) || load(flag1,1) || load(flag3,1) -> store(flag0,2);
		if
		:: load(flag0,4) || load(flag1,4) || load(flag3,4) -> skip;
		fi;
	:: (load(flag0,0) || load(flag0,2) || load(flag0,3) || load(flag0,4)) && (load(flag1,0) || load(flag1,2) || load(flag1,3) || load(flag1,4)) && (load(flag3,0) || load(flag3,2) || load(flag3,3) || load(flag3,4)) -> skip;
	fi;
	
	store(flag2,4);
	
	if
	:: load(flag0,0) -> skip;
	:: load(flag0,1) -> skip;
	:: load(flag1,0) -> skip;
	:: load(flag1,1) -> skip;
	:: load(flag3,0) -> skip;
	:: load(flag3,1) -> skip;
	fi;

	if
	:: (load(flag0,0) || load(flag0,1) || load(flag0,4)) && (load(flag1,0) || load(flag1,1) || load(flag1,4)) && (load(flag3,0) || load(flag3,1) || load(flag3,4)) -> skip;
	fi;
	
	store(flag2,0);
od;
}

proctype P3 {
do
:: true ->
	store(flag3,1);

	if
	:: (load(flag0,0) || load(flag0,1) || load(flag0,2)) && (load(flag1,0) || load(flag1,1) || load(flag1,2)) && (load(flag2,0) || load(flag2,1) || load(flag2,2)) -> skip;
	fi;
	
	store(flag3,3);

	if
	:: load(flag0,1) || load(flag1,1) || load(flag2,1) -> store(flag3,2);
		if
		:: load(flag0,4) || load(flag1,4) || load(flag2,4) -> skip;
		fi;
	:: (load(flag0,0) || load(flag0,2) || load(flag0,3) || load(flag0,4)) && (load(flag1,0) || load(flag1,2) || load(flag1,3) || load(flag1,4)) && (load(flag2,0) || load(flag2,2) || load(flag2,3) || load(flag2,4)) -> skip;
	fi;
	
	store(flag3,4);
	
	if
	:: load(flag0,0) -> skip;
	:: load(flag0,1) -> skip;
	:: load(flag1,0) -> skip;
	:: load(flag1,1) -> skip;
	:: load(flag2,0) -> skip;
	:: load(flag2,1) -> skip;
	fi;

	if
	:: (load(flag0,0) || load(flag0,1) || load(flag0,4)) && (load(flag1,0) || load(flag1,1) || load(flag1,4)) && (load(flag2,0) || load(flag2,1) || load(flag2,4)) -> skip;
	fi;
	
	store(flag3,0);
od;
}
