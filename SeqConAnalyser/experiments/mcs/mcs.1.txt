int next[3] = {255,255,255};
int locked[3];
int tail = 255;

proctype p1 {
int pred = 0;
int tmp;
do
:: true ->
	store(next[0],255);
	pred = loadval(tail);
	store(tail,0);
	if
	:: pred == 255 ->
		skip;
	:: pred != 255 ->
		store(locked[0], 1);
		store(next[pred], 0);
		store(locked[0], 0);
		skip;
	fi;
od;
}
